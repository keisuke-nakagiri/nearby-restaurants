{% extends 'base.html' %}
{% load static %}
{% block title %}レストラン検索結果{% endblock %}
{% block content %}

    {% include 'widgets/form.html' %}

    <div class="search_result">
        <h1>
            現在地から{{ search_range }}以内にあるお店
            {% if genre_name %}<span>{{ genre_name }}</span>{% endif %}
            {% if search_budget %}<span>{{ search_budget }}</span>{% endif %}
        </h1>
        <p>
            {{ restaurants.paginator.count }}件 - 
            <span>{{ restaurants.start_index }}~{{ restaurants.end_index }}件</span>
        </p>
        <p>
            {{ restaurants.number }}/{{ restaurants.paginator.num_pages }}
        </p>
    </div>

    {% for restaurant in restaurants %}
        <div class="card">
            <img src="{{ restaurant.photo.pc.l }}" alt="{{ restaurant.name }}">
            <a href="{% url 'restaurants:detail' pk=restaurant.id %}">
                <h1>{{ restaurant.name }}</h2>
            </a>
            <p>{{ genre_name }}</p>
            <p>{{ restaurant.access }}</p>
            <p>{{ restaurant.catch }}</p>
        </div>
    {% empty %}
        <p>該当する店舗がありませんでした。</p>
    {% endfor %}

    {% if restaurants.has_previous %}
        <a href="?page={{ restaurants.previous_page_number }}">前へ</a>
    {% endif %}

    {{ restaurants.number }}/{{ restaurants.paginator.num_pages }}

    {% if restaurants.has_next %}
        <a href="?page={{ restaurants.next_page_number }}">次へ</a>
    {% endif %}

    <script src="{% static 'js/geolocation.js' %}"></script>
{% endblock %}
